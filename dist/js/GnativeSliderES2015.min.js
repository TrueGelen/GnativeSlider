"use strict";function _instanceof(t,e){return null!=e&&"undefined"!=typeof Symbol&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):t instanceof e}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!_instanceof(t,e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var GnativeSlider=function(){function t(e){var i=this;return _classCallCheck(this,t),_defineProperty(this,"dotClick",async function(t){var e=i.activeItemIndex-i.arrActiveDots[t];e<0?(0===i.stackNext&&0===i.stackPrev?(i.stackNext=-1*e,i.stackWatcher()):0!==i.stackNext?i.stackNext=-1*e:0!==i.stackPrev&&(i.stackNext=-1*(e-1)),0!==i.stackPrev&&(i.stackPrev=1)):(0===i.stackPrev&&0===i.stackNext?(i.stackPrev=e,i.stackWatcher()):0!==i.stackPrev?i.stackPrev=e:0!==i.stackNext&&(i.stackPrev=e+1),0!==i.stackNext&&(i.stackNext=1))}),_defineProperty(this,"btnNextClick",async function(){i.finalSettings.loop?await i.slideWithLoop(!0):await i.slideWithoutLoop(!0)}),_defineProperty(this,"btnPrevClick",async function(){i.finalSettings.loop?await i.slideWithLoop(!1):await i.slideWithoutLoop(!1)}),_defineProperty(this,"getFirstTouch",function(t){i.itemsContainer.addEventListener("touchend",i.getTouchEnd),i.firstTouchX=t.touches[0].clientX,i.firstTouchY=t.touches[0].clientY,i.itemsContainer.removeEventListener("touchstart",i.getFirstTouch)}),_defineProperty(this,"getTouchEnd",async function(t){i.itemsContainer.removeEventListener("touchend",i.getTouchEnd),Math.abs(i.firstTouchX-t.changedTouches[0].clientX)>Math.abs(i.firstTouchY-t.changedTouches[0].clientY)&&(i.firstTouchX>t.changedTouches[0].clientX?await i.btnNextClick():await i.btnPrevClick()),i.itemsContainer.addEventListener("touchstart",i.getFirstTouch)}),this.defaultSettings={loop:!0,itemsContainer:void 0,animationTime:200,margin:"5px",nav:!0,btnNext:void 0,btnPrev:void 0,dots:!0,dotsContainer:void 0,exampleOfDot:void 0,activeDotClass:void 0,itemsCount:1,responsive:!1,breakpoints:{}},this.finalSettings=this.mergeSettings(this.defaultSettings,e),this.responsiveMap=this.getResponsiveMap(),this.wrapperItemsContainer=document.querySelector(this.finalSettings.itemsContainer),this.itemsContainer=document.createElement("div"),this.items=this.itemsContainer.children,this.widthItem="0",this.itemsCount=this.finalSettings.itemsCount,this.activeItemIndex=0,this.isNav=this.finalSettings.nav,this.btnNext=document.querySelector(this.finalSettings.btnNext),this.btnPrev=document.querySelector(this.finalSettings.btnPrev),this.displayOfButtons=this.getPropertyOfElement(this.btnNext,"display"),this.arrActiveDots=[0],this.dotsContainer=document.querySelector(this.finalSettings.dotsContainer),this.exampleOfDot=document.querySelector(this.finalSettings.exampleOfDot),this.isDots=this.finalSettings.dots,this.firstTouchX=0,this.firstTouchY=0,this.stackNext=0,this.stackPrev=0,this.stepOfAnimation,this.preparingItemsContainer(),this.setEventListeners(),this}return _createClass(t,[{key:"getPropertyOfElement",value:function(t,e){return""===t.style[e]?t.currentStyle?t.currentStyle[e]:getComputedStyle(t,null)[e]:t.style[e]}},{key:"preparingItemsContainer",value:function(){for(var t=0;t<this.wrapperItemsContainer.childNodes.length;t++)"#text"!==this.wrapperItemsContainer.childNodes[t].nodeName&&"#comment"!==this.wrapperItemsContainer.childNodes[t].nodeName||(this.wrapperItemsContainer.childNodes[t].remove(),t--);for(;this.wrapperItemsContainer.firstChild;){this.wrapperItemsContainer.firstChild.style.textAlign=this.getPropertyOfElement(this.wrapperItemsContainer.firstChild,"textAlign"),this.wrapperItemsContainer.firstChild.style.width="100%";var e=document.createElement("div");e.append(this.wrapperItemsContainer.firstChild),this.itemsContainer.append(e)}this.wrapperItemsContainer.append(this.itemsContainer),this.itemsContainer.style.overflow="hidden",this.itemsContainer.style.margin="0px -".concat(this.finalSettings.margin," 0px -").concat(this.finalSettings.margin),this.itemsContainer.style.textAlign="left"}},{key:"preparingItems",value:function(){for(var t=100/this.itemsCount,e=0;e<this.items.length;e++)this.items[e].style.width="calc(".concat(t,"% - ").concat(this.finalSettings.margin," - ").concat(this.finalSettings.margin,")"),this.items[e].style.margin="0px ".concat(this.finalSettings.margin)}},{key:"isNode",value:function(t){return t&&(1===t.nodeType||11==t.nodeType)}},{key:"mergeSettings",value:function(t,e){return Object.assign(t,e)}},{key:"isResponsive",value:function(){if(this.finalSettings.responsive){for(var t in this.finalSettings.breakpoints)if(t>window.innerWidth)return!0;return!1}return!1}},{key:"setIsNav",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0!==t?void 0!==this.finalSettings.breakpoints[t].nav&&(this.isNav=this.finalSettings.breakpoints[t].nav):this.isNav=this.finalSettings.nav,!this.isNode(this.btnNext)||!this.isNode(this.btnPrev))return!1;this.isNav?(this.btnNext.style.display=this.displayOfButtons,this.btnPrev.style.display=this.displayOfButtons):(this.btnNext.style.display="none",this.btnPrev.style.display="none")}},{key:"setItemsCount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(t){if("number"!=typeof this.finalSettings.breakpoints[e].itemsCount)return!1;this.itemsCount=this.finalSettings.breakpoints[e].itemsCount}else this.itemsCount=this.finalSettings.itemsCount}},{key:"setStepOfAnimation",value:function(){this.stepOfAnimation=this.widthItem/(this.finalSettings.animationTime/5)}},{key:"itemsBehavior",value:function(t){var e=this;return new Promise(function(i){var s,n=0;t?(e.items[e.itemsCount].style.display="inline-block",e.items[e.itemsCount].style.marginRight="-".concat(Number(e.widthItem),"px"),s=setInterval(function(){n+=e.stepOfAnimation,e.items[0].style.marginLeft="-"+n+"px",-1*parseInt(e.items[0].style.marginLeft)>Number(e.widthItem)&&(clearInterval(s),e.items[e.itemsCount].style.animationName="none",e.items[e.itemsCount].style.margin="0px ".concat(e.finalSettings.margin),e.items[0].style.animationName="none",e.items[0].style.display="none",e.items[0].style.margin="0px ".concat(e.finalSettings.margin),e.itemsContainer.append(e.items[0]),n=0,i())},5)):(e.items[e.items.length-1].style.marginLeft="-".concat(Number(e.widthItem),"px"),e.items[e.items.length-1].style.display="inline-block",e.itemsContainer.prepend(e.items[e.items.length-1]),e.itemsContainer.style.textAlign="right",s=setInterval(function(){n+=e.stepOfAnimation,e.items[e.itemsCount].style.marginRight="-"+n+"px",-1*parseInt(e.items[e.itemsCount].style.marginRight)>Number(e.widthItem)&&(clearInterval(s),e.items[0].style.animationName="none",e.items[0].style.margin="0px ".concat(e.finalSettings.margin),e.items[e.itemsCount].style.animationName="none",e.items[e.itemsCount].style.display="none",e.items[e.itemsCount].style.margin="0px ".concat(e.finalSettings.margin),e.itemsContainer.style.textAlign="left",n=0,i())},5))})}},{key:"setWidthItem",value:function(){this.widthItem=(this.items[0].getBoundingClientRect().width+parseInt(this.items[0].style.marginLeft)).toString()}},{key:"createItems",value:function(){for(var t=0;t<this.items.length;t++)this.items[t].style.display="none";for(var e=0;e<this.itemsCount;e++)this.items[e].style.display="inline-block"}},{key:"setIsDots",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;void 0!==t?void 0!==this.finalSettings.breakpoints[t].dots&&(this.isDots=this.finalSettings.breakpoints[t].dots):this.isDots=this.finalSettings.dots}},{key:"setArrActiveDots",value:function(){this.arrActiveDots=[0];for(var t=0,e=0;e<this.items.length;e+=this.itemsCount)(t+=this.itemsCount)<=this.items.length-1&&this.arrActiveDots.push(t);this.arrActiveDots[this.arrActiveDots.length-1]!==this.items.length-this.itemsCount&&(this.arrActiveDots[this.arrActiveDots.length-1]=this.items.length-this.itemsCount)}},{key:"dotsBehavior",value:function(){if(1===this.arrActiveDots.length)this.dotsContainer.childNodes[this.activeItemIndex].classList.remove(this.finalSettings.activeDotClass),this.dotsContainer.childNodes[this.activeItemIndex+1].classList.add(this.finalSettings.activeDotClass);else for(var t=0;t<this.arrActiveDots.length;t++)if(this.activeItemIndex===this.arrActiveDots[t]){var e=this.dotsContainer.querySelector("."+this.finalSettings.activeDotClass),i=this.arrActiveDots.indexOf(this.arrActiveDots[t]);return e.classList.remove(this.finalSettings.activeDotClass),this.dotsContainer.childNodes[i].classList.add(this.finalSettings.activeDotClass),!1}}},{key:"removeDots",value:function(){if(this.isNode(this.dotsContainer))for(;this.dotsContainer.firstChild;)this.dotsContainer.firstChild.remove()}},{key:"createDots",value:function(){var t;if(this.removeDots(),"number"!=typeof this.itemsCount)return!1;t=Math.ceil(this.items.length/this.itemsCount);for(var e=0;e<t;e++)this.dotsContainer.append(this.exampleOfDot.cloneNode(!0));for(var i=0;i<this.arrActiveDots.length;i++){if(this.activeItemIndex<this.arrActiveDots[i])return this.dotsContainer.children[i-1].classList.add(this.finalSettings.activeDotClass),!1;if(this.activeItemIndex==this.arrActiveDots[i])return this.dotsContainer.children[i].classList.add(this.finalSettings.activeDotClass),!1;if(0==this.activeIndex||this.activeIndex>this.arrActiveDots.length-1)return this.dotsContainer.firstChild.classList.add(this.finalSettings.activeDotClass),!1}}},{key:"setEventListenerForDots",value:function(){for(var t=0;t<this.dotsContainer.children.length;t++)this.dotsContainer.children[t].addEventListener("click",this.dotClick.bind(this,t))}},{key:"getResponsiveMap",value:function(){return Object.keys(this.finalSettings.breakpoints)}},{key:"getBreakPoint",value:function(){for(var t=0;t<this.responsiveMap.length;t++)if(Number(this.responsiveMap[t])>window.innerWidth)return this.responsiveMap[t]}},{key:"createSlider",value:function(){if(this.isResponsive()){var t=this.getBreakPoint();this.setItemsCount(!0,t),this.setIsDots(t),this.setArrActiveDots(),this.setIsNav(t)}else this.setItemsCount(!1),this.setArrActiveDots(),this.setIsDots(),this.setIsNav();this.isDots?(this.createDots(),this.setEventListenerForDots()):this.removeDots(),this.preparingItems(),this.createItems(),this.setWidthItem(),this.setStepOfAnimation()}},{key:"slideWithLoop",value:async function(t){t?(await this.itemsBehavior(t),this.activeItemIndex+1<this.items.length?(this.activeItemIndex++,this.isDots&&this.dotsBehavior()):(this.activeItemIndex=0,this.isDots&&this.dotsBehavior())):(await this.itemsBehavior(t),this.activeItemIndex-1>-1?(this.activeItemIndex--,this.isDots&&this.dotsBehavior()):(this.activeItemIndex=this.items.length-1,this.isDots&&this.dotsBehavior()))}},{key:"slideWithoutLoop",value:async function(t){if(t){if(!(this.activeItemIndex+this.itemsCount<=this.items.length-1))return!1;await this.itemsBehavior(t,0,this.itemsCount),this.activeItemIndex++,this.isDots&&this.dotsBehavior()}else{if(!(this.activeItemIndex-1>=0))return!1;await this.itemsBehavior(t,this.itemsCount-1,this.items.length-1),this.activeItemIndex--,this.isDots&&this.dotsBehavior()}}},{key:"stackWatcher",value:async function(){this.stackNext>0?(await this.btnNextClick(),this.stackNext--,this.stackWatcher()):this.stackPrev>0&&(await this.btnPrevClick(),this.stackPrev--,this.stackWatcher())}},{key:"setEventListeners",value:function(){var t=this;this.finalSettings.responsive&&window.addEventListener("resize",function(){t.createSlider()}),this.itemsContainer.addEventListener("touchstart",this.getFirstTouch),this.itemsContainer.addEventListener("touchend",this.getTouchEnd),this.isNode(this.btnNext)&&this.isNode(this.btnPrev)?(this.btnNext.addEventListener("click",function(){t.stackNext++,1===t.stackNext&&0===t.stackPrev&&t.stackWatcher(),0!==t.stackPrev&&(t.stackPrev=1)}),this.btnPrev.addEventListener("click",function(){t.stackPrev++,1===t.stackPrev&&0===t.stackNext&&t.stackWatcher(),0!==t.stackNext&&(t.stackNext=1)})):("string"==typeof settings.btnNext&&this.isNod(document.querySelector(settings.btnNext))||console.error('btnNext is a required field. Type of btnNext must be a string. The example: btnNext: ".someSection .someWrapper .someClass"'),"string"==typeof settings.btnPrev&&this.isNod(document.querySelector(settings.btnPrev))||console.error('btnPrev is a required field. Type of btnPrev must be a string. The example: btnPrev: ".someSection .someWrapper .someClass"'))}},{key:"validationOfTheInputObject",value:function(){if("object"!==_typeof(this.finalSettings))throw new Error('Your options must be an object. The example: new GnativeSlider({itemsContainer: ".someSection .someWrapper .someClass"})');if("string"!=typeof this.finalSettings.itemsContainer||!this.isNode(document.querySelector(this.finalSettings.itemsContainer)))throw new Error('itemsContainer is a required field. Type of itemsContainer must be a string. The example: itemsContainer: ".someSection .someWrapper .someClass"');if("string"!=typeof this.finalSettings.btnNext||!this.isNode(document.querySelector(this.finalSettings.btnNext)))throw new Error('btnNext is a required field. Type of btnNext must be a string. The example: btnNext: ".someSection .someWrapper .someClass"');if("string"!=typeof this.finalSettings.btnPrev||!this.isNode(document.querySelector(this.finalSettings.btnPrev)))throw new Error('btnPrev is a required field. Type of btnPrev must be a string. The example: btnPrev: ".someSection .someWrapper .someClass"');if("string"!=typeof this.finalSettings.dotsContainer||!this.isNode(document.querySelector(this.finalSettings.dotsContainer)))throw new Error('dotsContainer is a required field. Type of dotsContainer must be a string. The example: dotsContainer: ".someSection .someWrapper .someClass"');if("string"!=typeof this.finalSettings.exampleOfDot||!this.isNode(document.querySelector(this.finalSettings.exampleOfDot)))throw new Error('exampleOfDot is a required field. Type of exampleOfDot must be a string. The example: exampleOfDot: ".someSection .someWrapper .someClass"');if("string"!=typeof this.finalSettings.activeDotClass)throw new Error('activeDotClass is a required field. Type of activeDotClass must be a string. The example: activeDotClass: "yourActiveDotClass"');if("loop"in this.finalSettings&&"boolean"!=typeof this.finalSettings.loop)throw new Error("loop is not a required field. The default value is true. Type of loop must be a boolean. The example: loop: false");if("animationTime"in this.finalSettings&&"number"!=typeof this.finalSettings.animationTime)throw new Error("animationTime is not a required field. The default value is 200 ms. Type of loop must be a number. The example: animationTime: 200");if("margin"in this.finalSettings&&"string"!=typeof this.finalSettings.margin)throw new Error('margin is not a required field. The default value is 5px. Also margin can only be in pixels. Type of margin must be a string. The example: margin: "5px"');if("nav"in this.finalSettings&&"boolean"!=typeof this.finalSettings.nav)throw new Error("nav is not a required field. The default value is true. Type of nav must be a boolean. The example: nav: true");if("dots"in this.finalSettings&&"boolean"!=typeof this.finalSettings.dots)throw new Error("dots is not a required field. The default value is true. Type of dots must be a boolean. The example: dots: true");if("itemsCount"in this.finalSettings&&"number"!=typeof this.finalSettings.itemsCount)throw new Error("itemsCount is not a required field. The default value is 1. Type of itemsCount must be a number. The example: itemsCount: 1");if("responsive"in this.finalSettings&&"boolean"!=typeof this.finalSettings.responsive)throw new Error("responsive is not a required field. The default value is false. Type of responsive must be a boolean. The example: responsive: true");if("breakpoints"in this.finalSettings)for(var t in this.finalSettings.breakpoints){if("string"!=typeof t)throw new Error('Type of key of breakpoints must be a string. The example: breakpoints: "1100": {dots: true, nav: true}');if(isNaN(Number(t)))throw new Error('key of breakpoints must be a number but represented as a string. The example: breakpoints: "1100": {dots: true, nav: true}');if("object"!==_typeof(this.finalSettings.breakpoints[t]))throw new Error('keys of breakpoints must contains objects. The example: breakpoints: "1100": {dots: true, nav: true}, "960": {dots: false, nav: true}');if(!("itemsCount"in this.finalSettings.breakpoints[t]))throw new Error("itemsCount in breakpoints is a required field. Type of itemsCount must be a number. The example: itemsCount: 1");if("number"!=typeof this.finalSettings.breakpoints[t].itemsCount)throw new Error("Error in breakpoints."+t+". Type of itemsCount must be a number. The example: itemsCount: 1");if(!("dots"in this.finalSettings.breakpoints[t]))throw new Error("dots in breakpoints is a required field. Type of dots must be a boolean. The example: dots: true");if("boolean"!=typeof this.finalSettings.breakpoints[t].dots)throw new Error("Error in breakpoints."+t+". Type of dots must be a boolean. The example: dots: true");if(!("nav"in this.finalSettings.breakpoints[t]))throw new Error("dots in breakpoints is a required field. Type of nav must be a boolean. The example: nav: true");if("boolean"!=typeof this.finalSettings.breakpoints[t].nav)throw new Error("Error in breakpoints."+t+". Type of nav must be a boolean. The example: nav: true")}}}]),t}();