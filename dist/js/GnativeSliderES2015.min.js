"use strict";function _instanceof(left,right){if(right!=null&&typeof Symbol!=="undefined"&&right[Symbol.hasInstance]){return!!right[Symbol.hasInstance](left)}else{return left instanceof right}}
function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}
function _classCallCheck(instance,Constructor){if(!_instanceof(instance,Constructor)){throw new TypeError("Cannot call a class as a function")}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1;descriptor.configurable=!0;if("value" in descriptor)descriptor.writable=!0;Object.defineProperty(target,descriptor.key,descriptor)}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0})}else{obj[key]=value}return obj}
var GnativeSlider=function(){function GnativeSlider(settings){var _this=this;_classCallCheck(this,GnativeSlider);_defineProperty(this,"dotClick",async function(ind){var countStepTo=_this.activeItemIndex-_this.arrActiveDots[ind];if(countStepTo<0){if(_this.stackNext===0&&_this.stackPrev===0){_this.stackNext=countStepTo*-1;_this.stackWatcher()}else if(_this.stackNext!==0)_this.stackNext=countStepTo*-1;else if(_this.stackPrev!==0)_this.stackNext=(countStepTo-1)*-1;if(_this.stackPrev!==0)_this.stackPrev=1}else{if(_this.stackPrev===0&&_this.stackNext===0){_this.stackPrev=countStepTo;_this.stackWatcher()}else if(_this.stackPrev!==0)_this.stackPrev=countStepTo;else if(_this.stackNext!==0)_this.stackPrev=countStepTo+1;if(_this.stackNext!==0)_this.stackNext=1}});_defineProperty(this,"btnNextClick",async function(){if(_this.finalSettings.loop)await _this.slideWithLoop(!0);else await _this.slideWithoutLoop(!0)});_defineProperty(this,"btnPrevClick",async function(){if(_this.finalSettings.loop)await _this.slideWithLoop(!1);else await _this.slideWithoutLoop(!1)});_defineProperty(this,"getFirstTouch",function(e){_this.itemsContainer.addEventListener('touchend',_this.getTouchEnd);_this.firstTouchX=e.touches[0].clientX;_this.firstTouchY=e.touches[0].clientY;_this.itemsContainer.removeEventListener('touchstart',_this.getFirstTouch)});_defineProperty(this,"getTouchEnd",async function(e){_this.itemsContainer.removeEventListener('touchend',_this.getTouchEnd);var direction=Math.abs(_this.firstTouchX-e.changedTouches[0].clientX)>Math.abs(_this.firstTouchY-e.changedTouches[0].clientY);if(direction)if(_this.firstTouchX>e.changedTouches[0].clientX)await _this.btnNextClick();else await _this.btnPrevClick();_this.itemsContainer.addEventListener('touchstart',_this.getFirstTouch)});this.defaultSettings={loop:!0,itemsContainer:undefined,animationTime:200,margin:'5px',nav:!0,btnNext:undefined,btnPrev:undefined,dots:!0,dotsContainer:undefined,exampleOfDot:undefined,activeDotClass:undefined,itemsCount:1,responsive:!1,breakpoints:{}};this.finalSettings=this.mergeSettings(this.defaultSettings,settings);this.responsiveMap=this.getResponsiveMap();this.wrapperItemsContainer=document.querySelector(this.finalSettings.itemsContainer);this.itemsContainer=document.createElement('div');this.items=this.itemsContainer.children;this.widthItem='0';this.itemsCount=this.finalSettings.itemsCount;this.activeItemIndex=0;this.isNav=this.finalSettings.nav;this.btnNext=document.querySelector(this.finalSettings.btnNext);this.btnPrev=document.querySelector(this.finalSettings.btnPrev);this.displayOfButtons=this.getPropertyOfElement(this.btnNext,'display');this.arrActiveDots=[0];this.dotsContainer=document.querySelector(this.finalSettings.dotsContainer);this.exampleOfDot=document.querySelector(this.finalSettings.exampleOfDot);this.isDots=this.finalSettings.dots;this.firstTouchX=0;this.firstTouchY=0;this.stackNext=0;this.stackPrev=0;this.stepOfAnimation;this.preparingItemsContainer();this.setEventListeners();return this}
_createClass(GnativeSlider,[{key:"getPropertyOfElement",value:function getPropertyOfElement(element,property){if(element.style[property]===''){return element.currentStyle?element.currentStyle[property]:getComputedStyle(element,null)[property]}else return element.style[property]}},{key:"preparingItemsContainer",value:function preparingItemsContainer(){for(var i=0;i<this.wrapperItemsContainer.childNodes.length;i++){if(this.wrapperItemsContainer.childNodes[i].nodeName==="#text")this.wrapperItemsContainer.childNodes[i].remove()}
while(this.wrapperItemsContainer.firstChild){this.wrapperItemsContainer.firstChild.style.textAlign=this.getPropertyOfElement(this.wrapperItemsContainer.firstChild,'textAlign');this.wrapperItemsContainer.firstChild.style.width='100%';var wrapperItem=document.createElement('div');wrapperItem.append(this.wrapperItemsContainer.firstChild);this.itemsContainer.append(wrapperItem)}
this.wrapperItemsContainer.append(this.itemsContainer);this.itemsContainer.style.overflow='hidden';this.itemsContainer.style.margin="0px -".concat(this.finalSettings.margin," 0px -").concat(this.finalSettings.margin);this.itemsContainer.style.textAlign='left'}},{key:"preparingItems",value:function preparingItems(){var itemsWidth=100/this.itemsCount;for(var i=0;i<this.items.length;i++){this.items[i].style.width="calc(".concat(itemsWidth,"% - ").concat(this.finalSettings.margin," - ").concat(this.finalSettings.margin,")");this.items[i].style.margin="0px ".concat(this.finalSettings.margin)}}},{key:"isNode",value:function isNode(node){return node&&(node.nodeType===1||node.nodeType==11)}},{key:"mergeSettings",value:function mergeSettings(defaultSettings,settings){return Object.assign(defaultSettings,settings)}},{key:"isResponsive",value:function isResponsive(){if(this.finalSettings.responsive){for(var key in this.finalSettings.breakpoints){if(key>window.innerWidth)return!0}
return!1}else return!1}},{key:"setIsNav",value:function setIsNav(){var widthOfScreen=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;if(widthOfScreen!==undefined){if(this.finalSettings.breakpoints[widthOfScreen].nav!==undefined)this.isNav=this.finalSettings.breakpoints[widthOfScreen].nav}else{this.isNav=this.finalSettings.nav}
if(this.isNode(this.btnNext)&&this.isNode(this.btnPrev)){if(!this.isNav){this.btnNext.style.display='none';this.btnPrev.style.display='none'}else{this.btnNext.style.display=this.displayOfButtons;this.btnPrev.style.display=this.displayOfButtons}}else return!1}},{key:"setItemsCount",value:function setItemsCount(){var isResponsive=arguments.length>0&&arguments[0]!==undefined?arguments[0]:!1;var widthOfScreen=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;if(isResponsive){if(typeof this.finalSettings.breakpoints[widthOfScreen].itemsCount!=="number")return!1;this.itemsCount=this.finalSettings.breakpoints[widthOfScreen].itemsCount}else{this.itemsCount=this.finalSettings.itemsCount}}},{key:"setStepOfAnimation",value:function setStepOfAnimation(){this.stepOfAnimation=this.widthItem/(this.finalSettings.animationTime/5)}},{key:"itemsBehavior",value:function itemsBehavior(directionToggle){var _this2=this;return new Promise(function(resolve){var step=0;var startAnimate;var callbackForForwardAnim=function callbackForForwardAnim(){_this2.items[_this2.itemsCount].style.animationName='none';_this2.items[_this2.itemsCount].style.margin="0px ".concat(_this2.finalSettings.margin);_this2.items[0].style.animationName='none';_this2.items[0].style.display='none';_this2.items[0].style.margin="0px ".concat(_this2.finalSettings.margin);_this2.itemsContainer.append(_this2.items[0]);step=0};var callbackForBackwardAnim=function callbackForBackwardAnim(){_this2.items[0].style.animationName='none';_this2.items[0].style.margin="0px ".concat(_this2.finalSettings.margin);_this2.items[_this2.itemsCount].style.animationName='none';_this2.items[_this2.itemsCount].style.display='none';_this2.items[_this2.itemsCount].style.margin="0px ".concat(_this2.finalSettings.margin);_this2.itemsContainer.style.textAlign='left';step=0};var forwardAnim=function forwardAnim(){step+=_this2.stepOfAnimation;_this2.items[0].style.marginLeft="-"+step+"px";if(parseInt(_this2.items[0].style.marginLeft)*-1>Number(_this2.widthItem)){clearInterval(startAnimate);callbackForForwardAnim();resolve()}};var backwardAnim=function backwardAnim(){step+=_this2.stepOfAnimation;_this2.items[_this2.itemsCount].style.marginRight="-"+step+"px";if(parseInt(_this2.items[_this2.itemsCount].style.marginRight)*-1>Number(_this2.widthItem)){clearInterval(startAnimate);callbackForBackwardAnim();resolve()}};if(directionToggle){_this2.items[_this2.itemsCount].style.display='inline-block';_this2.items[_this2.itemsCount].style.marginRight="-".concat(Number(_this2.widthItem),"px");startAnimate=setInterval(forwardAnim,5)}else{_this2.items[_this2.items.length-1].style.marginLeft="-".concat(Number(_this2.widthItem),"px");_this2.items[_this2.items.length-1].style.display='inline-block';_this2.itemsContainer.prepend(_this2.items[_this2.items.length-1]);_this2.itemsContainer.style.textAlign='right';startAnimate=setInterval(backwardAnim,5)}})}},{key:"setWidthItem",value:function setWidthItem(){this.widthItem=(this.items[0].getBoundingClientRect().width+parseInt(this.items[0].style.marginLeft)).toString()}},{key:"createItems",value:function createItems(){for(var i=0;i<this.items.length;i++){this.items[i].style.display='none'}
for(var _i=0;_i<this.itemsCount;_i++){this.items[_i].style.display='inline-block'}}},{key:"setIsDots",value:function setIsDots(){var widthOfScreen=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;if(widthOfScreen!==undefined){if(this.finalSettings.breakpoints[widthOfScreen].dots!==undefined)this.isDots=this.finalSettings.breakpoints[widthOfScreen].dots}else{this.isDots=this.finalSettings.dots}}},{key:"setArrActiveDots",value:function setArrActiveDots(){this.arrActiveDots=[0];var total=0;for(var i=0;i<this.items.length;i+=this.itemsCount){total+=this.itemsCount;if(total<=this.items.length-1)this.arrActiveDots.push(total)}
if(this.arrActiveDots[this.arrActiveDots.length-1]!==this.items.length-this.itemsCount){this.arrActiveDots[this.arrActiveDots.length-1]=this.items.length-this.itemsCount}}},{key:"dotsBehavior",value:function dotsBehavior(){if(this.arrActiveDots.length===1){this.dotsContainer.childNodes[this.activeItemIndex].classList.remove(this.finalSettings.activeDotClass);this.dotsContainer.childNodes[this.activeItemIndex+1].classList.add(this.finalSettings.activeDotClass)}else{for(var i=0;i<this.arrActiveDots.length;i++){if(this.activeItemIndex===this.arrActiveDots[i]){var currentActiveDot=this.dotsContainer.querySelector("."+this.finalSettings.activeDotClass);var activeIndex=this.arrActiveDots.indexOf(this.arrActiveDots[i]);currentActiveDot.classList.remove(this.finalSettings.activeDotClass);this.dotsContainer.childNodes[activeIndex].classList.add(this.finalSettings.activeDotClass);return!1}}}}},{key:"removeDots",value:function removeDots(){if(this.isNode(this.dotsContainer)){while(this.dotsContainer.firstChild){this.dotsContainer.firstChild.remove()}}}},{key:"createDots",value:function createDots(){this.removeDots();var dotsCount;if(typeof this.itemsCount!=="number")return!1;else dotsCount=Math.ceil(this.items.length/this.itemsCount);for(var i=0;i<dotsCount;i++){this.dotsContainer.append(this.exampleOfDot.cloneNode(!0))}
for(var _i2=0;_i2<this.arrActiveDots.length;_i2++){if(this.activeItemIndex<this.arrActiveDots[_i2]){this.dotsContainer.children[_i2-1].classList.add(this.finalSettings.activeDotClass);return!1}else if(this.activeItemIndex==this.arrActiveDots[_i2]){this.dotsContainer.children[_i2].classList.add(this.finalSettings.activeDotClass);return!1}else if(this.activeIndex==0||this.activeIndex>this.arrActiveDots.length-1){this.dotsContainer.firstChild.classList.add(this.finalSettings.activeDotClass);return!1}}}},{key:"setEventListenerForDots",value:function setEventListenerForDots(){for(var i=0;i<this.dotsContainer.children.length;i++){this.dotsContainer.children[i].addEventListener('click',this.dotClick.bind(this,i))}}},{key:"getResponsiveMap",value:function getResponsiveMap(){return Object.keys(this.finalSettings.breakpoints)}},{key:"getBreakPoint",value:function getBreakPoint(){for(var i=0;i<this.responsiveMap.length;i++){if(Number(this.responsiveMap[i])>window.innerWidth){return this.responsiveMap[i]}}}},{key:"createSlider",value:function createSlider(){if(this.isResponsive()){var breakPoint=this.getBreakPoint();this.setItemsCount(!0,breakPoint);this.setIsDots(breakPoint);this.setArrActiveDots();this.setIsNav(breakPoint)}else{this.setItemsCount(!1);this.setArrActiveDots();this.setIsDots();this.setIsNav()}
if(this.isDots){this.createDots();this.setEventListenerForDots()}else this.removeDots();this.preparingItems();this.createItems();this.setWidthItem();this.setStepOfAnimation()}},{key:"slideWithLoop",value:async function slideWithLoop(directionToggle){if(directionToggle){await this.itemsBehavior(directionToggle);if(this.activeItemIndex+1<this.items.length){this.activeItemIndex++;if(this.isDots)this.dotsBehavior()}else{this.activeItemIndex=0;if(this.isDots)this.dotsBehavior()}}
else{await this.itemsBehavior(directionToggle);if(this.activeItemIndex-1>-1){this.activeItemIndex--;if(this.isDots)this.dotsBehavior()}else{this.activeItemIndex=this.items.length-1;if(this.isDots)this.dotsBehavior()}}}},{key:"slideWithoutLoop",value:async function slideWithoutLoop(directionToggle){if(directionToggle){if(this.activeItemIndex+this.itemsCount<=this.items.length-1){await this.itemsBehavior(directionToggle,0,this.itemsCount);this.activeItemIndex++;if(this.isDots)this.dotsBehavior()}else return!1}else if(this.activeItemIndex-1>=0){await this.itemsBehavior(directionToggle,this.itemsCount-1,this.items.length-1);this.activeItemIndex--;if(this.isDots)this.dotsBehavior()}else return!1}},{key:"stackWatcher",value:async function stackWatcher(){if(this.stackNext>0){await this.btnNextClick();this.stackNext--;this.stackWatcher()}else if(this.stackPrev>0){await this.btnPrevClick();this.stackPrev--;this.stackWatcher()}}},{key:"setEventListeners",value:function setEventListeners(){var _this3=this;if(this.finalSettings.responsive){window.addEventListener('resize',function(){_this3.createSlider()})}
this.itemsContainer.addEventListener('touchstart',this.getFirstTouch);this.itemsContainer.addEventListener('touchend',this.getTouchEnd);if(this.isNode(this.btnNext)&&this.isNode(this.btnPrev)){this.btnNext.addEventListener('click',function(){_this3.stackNext++;if(_this3.stackNext===1&&_this3.stackPrev===0){_this3.stackWatcher()}
if(_this3.stackPrev!==0)_this3.stackPrev=1});this.btnPrev.addEventListener('click',function(){_this3.stackPrev++;if(_this3.stackPrev===1&&_this3.stackNext===0){_this3.stackWatcher()}
if(_this3.stackNext!==0)_this3.stackNext=1})}else{if(typeof settings.btnNext!=="string"||!this.isNod(document.querySelector(settings.btnNext)))console.error('btnNext is a required field. Type of btnNext must be a string. The example: btnNext: ".someSection .someWrapper .someClass"');if(typeof settings.btnPrev!=="string"||!this.isNod(document.querySelector(settings.btnPrev)))console.error('btnPrev is a required field. Type of btnPrev must be a string. The example: btnPrev: ".someSection .someWrapper .someClass"')}}},{key:"validationOfTheInputObject",value:function validationOfTheInputObject(){if(_typeof(this.finalSettings)!=='object')throw new Error('Your options must be an object. The example: new GnativeSlider({itemsContainer: ".someSection .someWrapper .someClass"})');if(typeof this.finalSettings.itemsContainer!=='string'||!this.isNode(document.querySelector(this.finalSettings.itemsContainer)))throw new Error('itemsContainer is a required field. Type of itemsContainer must be a string. The example: itemsContainer: ".someSection .someWrapper .someClass"');if(typeof this.finalSettings.btnNext!=='string'||!this.isNode(document.querySelector(this.finalSettings.btnNext)))throw new Error('btnNext is a required field. Type of btnNext must be a string. The example: btnNext: ".someSection .someWrapper .someClass"');if(typeof this.finalSettings.btnPrev!=='string'||!this.isNode(document.querySelector(this.finalSettings.btnPrev)))throw new Error('btnPrev is a required field. Type of btnPrev must be a string. The example: btnPrev: ".someSection .someWrapper .someClass"');if(typeof this.finalSettings.dotsContainer!=='string'||!this.isNode(document.querySelector(this.finalSettings.dotsContainer)))throw new Error('dotsContainer is a required field. Type of dotsContainer must be a string. The example: dotsContainer: ".someSection .someWrapper .someClass"');if(typeof this.finalSettings.exampleOfDot!=='string'||!this.isNode(document.querySelector(this.finalSettings.exampleOfDot)))throw new Error('exampleOfDot is a required field. Type of exampleOfDot must be a string. The example: exampleOfDot: ".someSection .someWrapper .someClass"');if(typeof this.finalSettings.activeDotClass!=='string')throw new Error('activeDotClass is a required field. Type of activeDotClass must be a string. The example: activeDotClass: "yourActiveDotClass"');if('loop' in this.finalSettings)if(typeof this.finalSettings.loop!=='boolean')throw new Error('loop is not a required field. The default value is true. Type of loop must be a boolean. The example: loop: false');if('animationTime' in this.finalSettings)if(typeof this.finalSettings.animationTime!=='number')throw new Error('animationTime is not a required field. The default value is 200 ms. Type of loop must be a number. The example: animationTime: 200');if('margin' in this.finalSettings)if(typeof this.finalSettings.margin!=='string')throw new Error('margin is not a required field. The default value is 5px. Also margin can only be in pixels. Type of margin must be a string. The example: margin: "5px"');if('nav' in this.finalSettings)if(typeof this.finalSettings.nav!=='boolean')throw new Error('nav is not a required field. The default value is true. Type of nav must be a boolean. The example: nav: true');if('dots' in this.finalSettings)if(typeof this.finalSettings.dots!=='boolean')throw new Error('dots is not a required field. The default value is true. Type of dots must be a boolean. The example: dots: true');if('itemsCount' in this.finalSettings)if(typeof this.finalSettings.itemsCount!=='number')throw new Error('itemsCount is not a required field. The default value is 1. Type of itemsCount must be a number. The example: itemsCount: 1');if('responsive' in this.finalSettings)if(typeof this.finalSettings.responsive!=='boolean')throw new Error('responsive is not a required field. The default value is false. Type of responsive must be a boolean. The example: responsive: true');if('breakpoints' in this.finalSettings){for(var key in this.finalSettings.breakpoints){if(typeof key!=='string')throw new Error('Type of key of breakpoints must be a string. The example: breakpoints: "1100": {dots: true, nav: true}');if(isNaN(Number(key)))throw new Error('key of breakpoints must be a number but represented as a string. The example: breakpoints: "1100": {dots: true, nav: true}');if(_typeof(this.finalSettings.breakpoints[key])!=="object"){throw new Error('keys of breakpoints must contains objects. The example: breakpoints: "1100": {dots: true, nav: true}, "960": {dots: false, nav: true}')}
else{if('itemsCount' in this.finalSettings.breakpoints[key]){if(typeof this.finalSettings.breakpoints[key].itemsCount!=='number')throw new Error('Error in breakpoints.'+key+'. Type of itemsCount must be a number. The example: itemsCount: 1')}else{throw new Error('itemsCount in breakpoints is a required field. Type of itemsCount must be a number. The example: itemsCount: 1')}
if('dots' in this.finalSettings.breakpoints[key]){if(typeof this.finalSettings.breakpoints[key].dots!=='boolean')throw new Error('Error in breakpoints.'+key+'. Type of dots must be a boolean. The example: dots: true')}else{throw new Error('dots in breakpoints is a required field. Type of dots must be a boolean. The example: dots: true')}
if('nav' in this.finalSettings.breakpoints[key]){if(typeof this.finalSettings.breakpoints[key].nav!=='boolean')throw new Error('Error in breakpoints.'+key+'. Type of nav must be a boolean. The example: nav: true')}else{throw new Error('dots in breakpoints is a required field. Type of nav must be a boolean. The example: nav: true')}}}}}}]);return GnativeSlider}()